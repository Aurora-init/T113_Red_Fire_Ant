###############################################################################
#
# IAR C/C++ Compiler V10.10.1.4655 for 8051               26/Mar/2023  16:30:18
# Copyright 2004-2017 IAR Systems AB.
# Standalone license - IAR Embedded Workbench for 8051
#
#    Core               =  plain
#    Code model         =  banked
#    Data model         =  large
#    Calling convention =  xdata reentrant
#    Constant location  =  data_rom
#    Dptr setup         =  1,16
#                          
#    Source file        =  
#        D:\桌面\《ZigBee3.0开发指南》配套资源（附加部分）\课外篇：项目实战\基于Zigbee的温湿度
#        &
#        光照度采集系统\ZigBee设备端固件与源码\源码\Components\hal\userspace\hw_spi.c
#    Command line       =  
#        -f C:\Users\11148\AppData\Local\Temp\EWBFFB.tmp
#        ("D:\桌面\《ZigBee3.0开发指南》配套资源（附加部分）\课外篇：项目实战\基于Zigbee的温湿度
#        &
#        光照度采集系统\ZigBee设备端固件与源码\源码\Components\hal\userspace\hw_spi.c"
#        -D SECURE=1 -D TC_LINKKEY_JOIN -D NV_INIT -D NV_RESTORE -D xZTOOL_P1
#        -D xMT_TASK -D xMT_APP_FUNC -D xMT_SYS_FUNC -D xMT_ZDO_FUNC -D
#        xMT_ZDO_MGMT -D xMT_APP_CNF_FUNC -D LCD_SUPPORTED=DEBUG -D
#        MULTICAST_ENABLED=FALSE -D ZCL_READ -D ZCL_DISCOVER -D ZCL_WRITE -D
#        ZCL_BASIC -D ZCL_IDENTIFY -D ZCL_ON_OFF -D ZCL_GROUPS -D
#        ZCL_LEVEL_CTRL -D HAL_KEY=TRUE -D xISR_KEYINTERRUPT -D HAL_UART=TRUE
#        -D INT_HEAP_LEN=2048 -D HAL_LCD=TRUE -D HAL_LCD_OLED12864=TRUE -lC
#        "D:\桌面\《ZigBee3.0开发指南》配套资源（附加部分）\课外篇：项目实战\基于Zigbee的温湿度
#        &
#        光照度采集系统\ZigBee设备端固件与源码\源码\Projects\CC2530\Category\Coordinator\List"
#        -lA
#        "D:\桌面\《ZigBee3.0开发指南》配套资源（附加部分）\课外篇：项目实战\基于Zigbee的温湿度
#        &
#        光照度采集系统\ZigBee设备端固件与源码\源码\Projects\CC2530\Category\Coordinator\List"
#        --diag_suppress Pe001,Pa010 -o
#        "D:\桌面\《ZigBee3.0开发指南》配套资源（附加部分）\课外篇：项目实战\基于Zigbee的温湿度
#        &
#        光照度采集系统\ZigBee设备端固件与源码\源码\Projects\CC2530\Category\Coordinator\Obj"
#        -e --debug --core=plain --dptr=16,1 --data_model=large
#        --code_model=banked --calling_convention=xdata_reentrant
#        --place_constants=data_rom --nr_virtual_regs 16 -f
#        "D:\桌面\《ZigBee3.0开发指南》配套资源（附加部分）\课外篇：项目实战\基于Zigbee的温湿度
#        &
#        光照度采集系统\ZigBee设备端固件与源码\源码\Projects\CC2530\Tools\f8wCoord.cfg"
#        (-DCPU32MHZ -DROOT=__near_func -DMAC_CFG_APP_PENDING_QUEUE=TRUE
#        -DMAC_CFG_TX_DATA_MAX=5 -DMAC_CFG_TX_MAX=8 -DMAC_CFG_RX_MAX=5
#        -DZDO_COORDINATOR -DRTR_NWK) -f
#        "D:\桌面\《ZigBee3.0开发指南》配套资源（附加部分）\课外篇：项目实战\基于Zigbee的温湿度
#        &
#        光照度采集系统\ZigBee设备端固件与源码\源码\Projects\CC2530\Tools\f8wConfig.cfg"
#        (-DZIGBEEPRO -DSECURE=1 -DZG_SECURE_DYNAMIC=0 -DREFLECTOR
#        -DDEFAULT_CHANLIST=0x00000800 -DZDAPP_CONFIG_PAN_ID=0x0402
#        -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MASK=0x007F
#        -DBEACON_REQUEST_DELAY=100 -DBEACON_REQ_DELAY_MASK=0x00FF
#        -DLINK_STATUS_JITTER_MASK=0x007F -DROUTE_EXPIRY_TIME=30
#        -DAPSC_ACK_WAIT_DURATION_POLLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7
#        -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3
#        -DNWK_MAX_DATA_RETRIES=2 -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9
#        -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40 -DNWK_MAX_BINDING_ENTRIES=4
#        -DMAX_BINDING_CLUSTER_IDS=4 "-DDEFAULT_KEY={0x5a, 0x69, 0x67, 0x42,
#        0x65,0x65, 0x41, 0x6c, 0x6c, 0x69, 0x61, 0x6e, 0x63, 0x65, 0x30,
#        0x39}" -DMAC_MAX_FRAME_SIZE=116 -DZDNWKMGR_MIN_TRANSMISSIONS=20
#        "-DCONST=const __code" -DGENERIC=__generic -DRFD_RCVC_ALWAYS_ON=FALSE
#        -DPOLL_RATE=1000 -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100
#        -DREJOIN_POLL_RATE=440 -DREJOIN_BACKOFF=900000 -DREJOIN_SCAN=900000
#        -DENABLE_LED4_DISABLE_S1) -f
#        "D:\桌面\《ZigBee3.0开发指南》配套资源（附加部分）\课外篇：项目实战\基于Zigbee的温湿度
#        &
#        光照度采集系统\ZigBee设备端固件与源码\源码\Projects\CC2530\Tools\f8wZCL.cfg"
#        -I
#        "D:\桌面\《ZigBee3.0开发指南》配套资源（附加部分）\课外篇：项目实战\基于Zigbee的温湿度
#        & 光照度采集系统\ZigBee设备端固件与源码\源码\Projects\CC2530\" -I
#        "D:\桌面\《ZigBee3.0开发指南》配套资源（附加部分）\课外篇：项目实战\基于Zigbee的温湿度
#        &
#        光照度采集系统\ZigBee设备端固件与源码\源码\Projects\CC2530\..\..\Components\hal\include\"
#        -I
#        "D:\桌面\《ZigBee3.0开发指南》配套资源（附加部分）\课外篇：项目实战\基于Zigbee的温湿度
#        &
#        光照度采集系统\ZigBee设备端固件与源码\源码\Projects\CC2530\..\..\Components\hal\target\CC2530EB\"
#        -I
#        "D:\桌面\《ZigBee3.0开发指南》配套资源（附加部分）\课外篇：项目实战\基于Zigbee的温湿度
#        &
#        光照度采集系统\ZigBee设备端固件与源码\源码\Projects\CC2530\..\..\Components\hal\userspace\"
#        -I
#        "D:\桌面\《ZigBee3.0开发指南》配套资源（附加部分）\课外篇：项目实战\基于Zigbee的温湿度
#        &
#        光照度采集系统\ZigBee设备端固件与源码\源码\Projects\CC2530\..\..\Components\mac\include\"
#        -I
#        "D:\桌面\《ZigBee3.0开发指南》配套资源（附加部分）\课外篇：项目实战\基于Zigbee的温湿度
#        &
#        光照度采集系统\ZigBee设备端固件与源码\源码\Projects\CC2530\..\..\Components\mac\high_level\"
#        -I
#        "D:\桌面\《ZigBee3.0开发指南》配套资源（附加部分）\课外篇：项目实战\基于Zigbee的温湿度
#        &
#        光照度采集系统\ZigBee设备端固件与源码\源码\Projects\CC2530\..\..\Components\mac\low_level\srf04\"
#        -I
#        "D:\桌面\《ZigBee3.0开发指南》配套资源（附加部分）\课外篇：项目实战\基于Zigbee的温湿度
#        &
#        光照度采集系统\ZigBee设备端固件与源码\源码\Projects\CC2530\..\..\Components\mac\low_level\srf04\single_chip\"
#        -I
#        "D:\桌面\《ZigBee3.0开发指南》配套资源（附加部分）\课外篇：项目实战\基于Zigbee的温湿度
#        &
#        光照度采集系统\ZigBee设备端固件与源码\源码\Projects\CC2530\..\..\Components\mt\"
#        -I
#        "D:\桌面\《ZigBee3.0开发指南》配套资源（附加部分）\课外篇：项目实战\基于Zigbee的温湿度
#        &
#        光照度采集系统\ZigBee设备端固件与源码\源码\Projects\CC2530\..\..\Components\osal\include\"
#        -I
#        "D:\桌面\《ZigBee3.0开发指南》配套资源（附加部分）\课外篇：项目实战\基于Zigbee的温湿度
#        &
#        光照度采集系统\ZigBee设备端固件与源码\源码\Projects\CC2530\..\..\Components\services\saddr\"
#        -I
#        "D:\桌面\《ZigBee3.0开发指南》配套资源（附加部分）\课外篇：项目实战\基于Zigbee的温湿度
#        &
#        光照度采集系统\ZigBee设备端固件与源码\源码\Projects\CC2530\..\..\Components\services\sdata\"
#        -I
#        "D:\桌面\《ZigBee3.0开发指南》配套资源（附加部分）\课外篇：项目实战\基于Zigbee的温湿度
#        &
#        光照度采集系统\ZigBee设备端固件与源码\源码\Projects\CC2530\..\..\Components\stack\af\"
#        -I
#        "D:\桌面\《ZigBee3.0开发指南》配套资源（附加部分）\课外篇：项目实战\基于Zigbee的温湿度
#        &
#        光照度采集系统\ZigBee设备端固件与源码\源码\Projects\CC2530\..\..\Components\stack\bdb\"
#        -I
#        "D:\桌面\《ZigBee3.0开发指南》配套资源（附加部分）\课外篇：项目实战\基于Zigbee的温湿度
#        &
#        光照度采集系统\ZigBee设备端固件与源码\源码\Projects\CC2530\..\..\Components\stack\gp\"
#        -I
#        "D:\桌面\《ZigBee3.0开发指南》配套资源（附加部分）\课外篇：项目实战\基于Zigbee的温湿度
#        &
#        光照度采集系统\ZigBee设备端固件与源码\源码\Projects\CC2530\..\..\Components\stack\nwk\"
#        -I
#        "D:\桌面\《ZigBee3.0开发指南》配套资源（附加部分）\课外篇：项目实战\基于Zigbee的温湿度
#        &
#        光照度采集系统\ZigBee设备端固件与源码\源码\Projects\CC2530\..\..\Components\stack\sapi\"
#        -I
#        "D:\桌面\《ZigBee3.0开发指南》配套资源（附加部分）\课外篇：项目实战\基于Zigbee的温湿度
#        &
#        光照度采集系统\ZigBee设备端固件与源码\源码\Projects\CC2530\..\..\Components\stack\sec\"
#        -I
#        "D:\桌面\《ZigBee3.0开发指南》配套资源（附加部分）\课外篇：项目实战\基于Zigbee的温湿度
#        &
#        光照度采集系统\ZigBee设备端固件与源码\源码\Projects\CC2530\..\..\Components\stack\sys\"
#        -I
#        "D:\桌面\《ZigBee3.0开发指南》配套资源（附加部分）\课外篇：项目实战\基于Zigbee的温湿度
#        &
#        光照度采集系统\ZigBee设备端固件与源码\源码\Projects\CC2530\..\..\Components\stack\zcl\"
#        -I
#        "D:\桌面\《ZigBee3.0开发指南》配套资源（附加部分）\课外篇：项目实战\基于Zigbee的温湿度
#        &
#        光照度采集系统\ZigBee设备端固件与源码\源码\Projects\CC2530\..\..\Components\stack\zdo\"
#        -I
#        "D:\桌面\《ZigBee3.0开发指南》配套资源（附加部分）\课外篇：项目实战\基于Zigbee的温湿度
#        &
#        光照度采集系统\ZigBee设备端固件与源码\源码\Projects\CC2530\..\..\Components\zmac\"
#        -I
#        "D:\桌面\《ZigBee3.0开发指南》配套资源（附加部分）\课外篇：项目实战\基于Zigbee的温湿度
#        &
#        光照度采集系统\ZigBee设备端固件与源码\源码\Projects\CC2530\..\..\Components\zmac\f8w\"
#        -I
#        "D:\桌面\《ZigBee3.0开发指南》配套资源（附加部分）\课外篇：项目实战\基于Zigbee的温湿度
#        &
#        光照度采集系统\ZigBee设备端固件与源码\源码\Projects\CC2530\..\..\Applications\"
#        -Ohz --require_prototypes)
#    Locale             =  Chinese (Simplified)_China.936
#    List file          =  
#        D:\桌面\《ZigBee3.0开发指南》配套资源（附加部分）\课外篇：项目实战\基于Zigbee的温湿度
#        &
#        光照度采集系统\ZigBee设备端固件与源码\源码\Projects\CC2530\Category\Coordinator\List\hw_spi.lst
#    Object file        =  
#        D:\桌面\《ZigBee3.0开发指南》配套资源（附加部分）\课外篇：项目实战\基于Zigbee的温湿度
#        &
#        光照度采集系统\ZigBee设备端固件与源码\源码\Projects\CC2530\Category\Coordinator\Obj\hw_spi.r51
#
###############################################################################

D:\桌面\《ZigBee3.0开发指南》配套资源（附加部分）\课外篇：项目实战\基于Zigbee的温湿度 & 光照度采集系统\ZigBee设备端固件与源码\源码\Components\hal\userspace\hw_spi.c
      1          #include "hw_spi.h"

   \                                 In  segment SFR_AN, at 0xf1
   \   unsigned char volatile __sfr PERCFG
   \                     PERCFG:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xf4
   \   unsigned char volatile __sfr P1SEL
   \                     P1SEL:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xf5
   \   unsigned char volatile __sfr P2SEL
   \                     P2SEL:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xf8
   \   union <unnamed> volatile __sfr _A_U1CSR
   \                     _A_U1CSR:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xf9
   \   unsigned char volatile __sfr U1DBUF
   \                     U1DBUF:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xfa
   \   unsigned char volatile __sfr U1BAUD
   \                     U1BAUD:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xfc
   \   unsigned char volatile __sfr U1GCR
   \                     U1GCR:
   \   000000                DS 1
      2          
      3          static void CC2530_Spi1Init(uint8 alternate, uint8 bitOrder, uint8 CPOL, uint8 CPHA);
      4          static int CC2530_Spi1TxByte(uint8 b);
      5          static uint8 CC2530_Spi1RxByte(void);
      6          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
      7          void HwSPIInit(HwSPICfg_t *hw)
   \                     HwSPIInit:
      8          {
   \   000000   C082         PUSH      DPL
   \   000002   C083         PUSH      DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
      9              switch(hw->alternate)
   \   000004   8A82         MOV       DPL,R2
   \   000006   8B83         MOV       DPH,R3
   \   000008   E0           MOVX      A,@DPTR
   \   000009   6403         XRL       A,#0x3
   \   00000B   704A         JNZ       ??HwSPIInit_0
     10              {
     11              case HW_SPI1_ALT2:
     12                CC2530_Spi1Init(HW_SPI1_ALT2, hw->bitOrder, hw->CPOL, hw->CPHA);
   \   00000D   A3           INC       DPTR
   \   00000E   A3           INC       DPTR
   \   00000F   A3           INC       DPTR
   \   000010   E0           MOVX      A,@DPTR
   \   000011   F9           MOV       R1,A
   \   000012   8A82         MOV       DPL,R2
   \   000014   8B83         MOV       DPH,R3
   \   000016   A3           INC       DPTR
   \   000017   A3           INC       DPTR
   \   000018   E0           MOVX      A,@DPTR
   \   000019   F8           MOV       R0,A
   \   00001A   8A82         MOV       DPL,R2
   \   00001C   8B83         MOV       DPH,R3
   \   00001E   A3           INC       DPTR
   \   00001F   E0           MOVX      A,@DPTR
   \   000020   FA           MOV       R2,A
   \   000021   75F800       MOV       0xf8,#0x0
   \   000024   43FC11       ORL       0xfc,#0x11
   \   000027   75FA00       MOV       0xfa,#0x0
   \   00002A   43F102       ORL       0xf1,#0x2
   \   00002D   43F4E0       ORL       0xf4,#0xe0
   \   000030   7005         JNZ       ??HwSPIInit_1
   \   000032   43FC20       ORL       0xfc,#0x20
   \   000035   8003         SJMP      ??HwSPIInit_2
   \                     ??HwSPIInit_1:
   \   000037   53FCDF       ANL       0xfc,#0xdf
   \                     ??HwSPIInit_2:
   \   00003A   7401         MOV       A,#0x1
   \   00003C   68           XRL       A,R0
   \   00003D   7005         JNZ       ??HwSPIInit_3
   \   00003F   43FC80       ORL       0xfc,#0x80
   \   000042   8003         SJMP      ??HwSPIInit_4
   \                     ??HwSPIInit_3:
   \   000044   53FC7F       ANL       0xfc,#0x7f
   \                     ??HwSPIInit_4:
   \   000047   E9           MOV       A,R1
   \   000048   7005         JNZ       ??HwSPIInit_5
   \   00004A   53FCBF       ANL       0xfc,#0xbf
   \   00004D   8003         SJMP      ??HwSPIInit_6
   \                     ??HwSPIInit_5:
   \   00004F   43FC40       ORL       0xfc,#0x40
   \                     ??HwSPIInit_6:
   \   000052   53F5DF       ANL       0xf5,#0xdf
   \   000055   D2FE         SETB      0xf8.6
     13              break;
     14              
     15              default:
     16              break;
     17              }
     18          }
   \                     ??HwSPIInit_0:
   \   000057   D083         POP       DPH
   \   000059   D082         POP       DPL
   \   00005B   02....       LJMP      ?BRET
   \   00005E                REQUIRE _A_U1CSR
   \   00005E                REQUIRE U1GCR
   \   00005E                REQUIRE U1BAUD
   \   00005E                REQUIRE PERCFG
   \   00005E                REQUIRE P1SEL
   \   00005E                REQUIRE P2SEL
     19          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
     20          int HwSPITxByte(uint8 alternate, uint8 b)
   \                     HwSPITxByte:
     21          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
   \   000000   EA           MOV       A,R2
   \   000001   F8           MOV       R0,A
     22              int ret = -1;
   \   000002   7AFF         MOV       R2,#-0x1
   \   000004   7BFF         MOV       R3,#-0x1
     23              
     24              if (alternate == HW_SPI1_ALT2) ret = CC2530_Spi1TxByte(b);
   \   000006   7403         MOV       A,#0x3
   \   000008   69           XRL       A,R1
   \   000009   701E         JNZ       ??HwSPITxByte_0
   \   00000B   7C14         MOV       R4,#0x14
   \   00000D   7D19         MOV       R5,#0x19
   \   00000F   C2F9         CLR       0xf8.1
   \   000011   88F9         MOV       0xf9,R0
   \                     ??HwSPITxByte_1:
   \   000013   A2F9         MOV       C,0xf8.1
   \   000015   EC           MOV       A,R4
   \   000016   400C         JC        ??HwSPITxByte_2
   \   000018   2A           ADD       A,R2
   \   000019   1C           DEC       R4
   \   00001A   ED           MOV       A,R5
   \   00001B   34FF         ADDC      A,#-0x1
   \   00001D   FD           MOV       R5,A
   \   00001E   EC           MOV       A,R4
   \   00001F   4D           ORL       A,R5
   \   000020   6007         JZ        ??HwSPITxByte_0
   \   000022   80EF         SJMP      ??HwSPITxByte_1
   \                     ??HwSPITxByte_2:
   \   000024   4D           ORL       A,R5
   \   000025   6002         JZ        ??HwSPITxByte_0
   \   000027   0A           INC       R2
   \   000028   0B           INC       R3
     25              
     26              return ret;
   \                     ??HwSPITxByte_0:
   \   000029   02....       LJMP      ?BRET
   \   00002C                REQUIRE _A_U1CSR
   \   00002C                REQUIRE U1DBUF
     27          }
     28          

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
     29          uint8 HwSPIRxByte(uint8 alternate)
   \                     HwSPIRxByte:
     30          {
   \   000000                ; Saved register size: 0
   \   000000                ; Auto size: 0
   \   000000   E9           MOV       A,R1
   \   000001   F8           MOV       R0,A
     31              uint8 b = 0x00;
   \   000002   7900         MOV       R1,#0x0
     32          
     33              if (alternate == HW_SPI1_ALT2) b = CC2530_Spi1RxByte();
   \   000004   7403         MOV       A,#0x3
   \   000006   68           XRL       A,R0
   \   000007   7002         JNZ       ??HwSPIRxByte_0
   \   000009   A9F9         MOV       R1,0xf9+0x0
     34          
     35              return b;
   \                     ??HwSPIRxByte_0:
   \   00000B   02....       LJMP      ?BRET
   \   00000E                REQUIRE U1DBUF
     36          }

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??HwSPIInit::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HwSPIInit

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??HwSPITxByte::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HwSPITxByte

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??HwSPIRxByte::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    HwSPIRxByte
     37          
     38          /* 
     39           * @brief	Init CC2530 SPI1
     40           *
     41           * @param 	alternate - SPI-1 alternate
     42           * @param   bitOrder - SPI bit rrder
     43           * @param   CPOL - lock polarity
     44           * @param   CPHA - clock phase
     45           */
     46          static void CC2530_Spi1Init(uint8 alternate, uint8 bitOrder, uint8 CPOL, uint8 CPHA)
     47          {
     48              /* Mode select UART1 SPI Mode as master. */
     49              U1CSR = 0; 
     50            
     51              /* Setup for baud, sys-clock/8 MHZ */
     52              U1GCR |= 0x11;
     53              U1BAUD = 0x00;
     54            
     55              if (alternate == HW_SPI1_ALT2) {
     56                /* Set USART1 I/O to alternate 2 location on P1 pins:
     57                 * SCK:P1_5, MOSI:P1_6, MISO:P1_7
     58                 */
     59                PERCFG |= 0x02;
     60                
     61                /* Select peripheral function on I/O pins but SS is left as GPIO for 
     62                 * separate control: SELP1_[7:4]
     63                 */
     64                P1SEL |= 0xE0;
     65              }
     66              
     67              /* Set bit order to MSB */
     68              if (bitOrder == HW_SPI_BITORDER_MSB) U1GCR |= (1 << 5); 
     69              else U1GCR &= ~(1 << 5); 
     70          
     71              /* Set clock polarity, CPOL */
     72              if (CPOL == HW_SPI_CPOL_HIGH) U1GCR |= (1<<7);
     73              else U1GCR &= ~(1<<7);
     74              
     75              /* Set clock phase, CPHA */
     76              if (CPHA == HW_SPI_CPHA_FIRST) U1GCR &= ~(1<<6);
     77              else U1GCR |= (1<<6);
     78              
     79              /* Give USART1 priority over Timer3. */
     80              P2SEL &= ~0x20;
     81              
     82              /* When SPI config is complete, enable it. */
     83              U1CSR |= 0x40; 
     84          }
     85          
     86          /*
     87           * @brief   Tx a byte by CC2530 HW-SPI-1
     88           * @param   b - byte
     89           * @return  SUCCESS: 0, Other: -1
     90           */
     91          static int CC2530_Spi1TxByte(uint8 b)
     92          {
     93              uint16 timeout = 6420;  // 32MHZ ~6ms, 16MHZ ~12ms
     94            
     95              U1CSR &= ~0x02; 
     96              U1DBUF = b;
     97              
     98              while (!(U1CSR & 0x02)) if (--timeout == 0) break;
     99              
    100              return (timeout == 0)? -1 : 0;
    101          }
    102          
    103          static uint8 CC2530_Spi1RxByte(void)
    104          {
    105              uint8 b = U1DBUF;
    106              return b;
    107          }

   Maximum stack usage in bytes:

   ISTACK Function
   ------ --------
      2   HwSPIInit
      0   HwSPIRxByte
      0   HwSPITxByte


   Segment part sizes:

   Bytes  Function/Label
   -----  --------------
      94  HwSPIInit
       6  HwSPIInit::?relay
      14  HwSPIRxByte
       6  HwSPIRxByte::?relay
      44  HwSPITxByte
       6  HwSPITxByte::?relay
       1  P1SEL
       1  P2SEL
       1  PERCFG
       1  U1BAUD
       1  U1DBUF
       1  U1GCR
       1  _A_U1CSR

 
 152 bytes in segment BANKED_CODE
  18 bytes in segment BANK_RELAYS
   7 bytes in segment SFR_AN
 
  18 bytes of CODE     memory
   0 bytes of DATA     memory (+ 7 bytes shared)
 152 bytes of HUGECODE memory

Errors: none
Warnings: none
